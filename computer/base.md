---

title: "计算机基础"
date: 2022-05-20T15:30:00+08:00
draft: false
share: true
slug: "constructor-instructor"
author: "Damon"
tags: ["computer"]
image: "/images/computer/computer.png"
categories: ["computer"]

---
# 计算机基础
## 1.计算机组成

* **控制器**：    指挥程序运行
* **运算器**：    进行算术运算、逻辑运算
* **存储器**：    存放程序和数据
* **输入设备**：将信息转换成计算机能识别的设备
* **输出设备**：将计算机的处理结果转变成人们熟悉的形式

{{< figure src="/images/computer/计算机组成.png" >}}

经过改进，将**运算器**和**控制器**合并统称为**中央处理器**，也就是我们常说的**CPU**，同时重心转移到以存储器为中心改进后的组成如下图所示：![](/images/computer/计算机组成2.jpg)

## 指令

我们的程序代码首先要经过**编译**（Compile），编译成**汇编代码**（ASM），汇编代码在经过**汇编器**（Assembler）翻译成**机器码**（Machine Code）。**机器码就是一条一条的计算机指令**。宏观上可以分为两部分，即**操作码**和**数据地址**。操作码用来标识一条指令的功能，数据地址则是该指令要操作的对象。
![](/images/computer/指令的执行过程.jpg)

* PC：指令（程序）计数器，总是指向下一条要执行的指令的地址；
* IR：指令寄存器，存放即将要执行的指令；
* ID：指令译码器，解读指令要执行的何种操作；
* MAR：地址寄存器，存放指令在内存中的地址，它的存在一定程度上解决了直接到内存查找速度上的不匹配；
* MDR：数据寄存器，存放从内存取出的数据/指令
* PSW：状态寄存器，状态切换时，用于保存当前程序的执行状态
* ALU：算术逻辑单元，进行算术、逻辑运算
* ACC：累加寄存器，存放运算前的操作数，或运算结果的寄存器
**执行步骤：5 + 3**

1. 取指：PC ---> MAR ---> M(存储器) --->MDR ---> IR
2. 分析：ID ---> CU ---> ACC(5)
3. 执行：Ad ---> MAR ---> M ---> MDR ---> ACC

因此，**指令周期 = 取指周期 + 分析周期 + 执行周期**

**指令流水技术：** 指令执行周期中，不同时期使用到的机器部件不同，A指令在执行时，可同步开启B指令的取指，如下图所示：![](/images/computer/流水线时间建立.jpg)

* **流水线周期**：指令周期中执行时间最长的一段（例如：取指时间=1，分析时间=3，执行时间=2，流水线周期 = 3） 
* **流水线建立时间**：第一条指令的执行时间
* **流水线吞吐率**：指令条数 / 流水线执行时间
* **流水线最大吞吐率**：![:inline](/images/computer/流水线最大吞吐率.png)
* **流水线加速比**：**不使用流水线的执行时间** / **使用流水线的执行时间**

流水线指令执行需要的时间计算：

**理论公式：**<span style="color:red">流水线建立时间 + （n - 1） * ∆t</span>

**实践公式：**<span style="color:red">（流水线分段数 + 流水线数 - 1）* ∆t</span>

---

举例如下：

若流水线把一条指令分为取指、分析和执行三个部分，三部分的时间分别是取指2ns，分析2ns，执行1ns。

那么**流水线周期**是多少？

100条指令全部执行完毕需要的时间是多少，**吞吐率、加速比**个是多少？

**解：**

 <1> 流水线周期 = 指令周期中执行时间最长的一段，即2ns

 <2> 按照理论公式：(2 + 2 + 1) + (100 - 1) * 2 = 203ns；按实践公式：（3 + 100 - 1）* 2 = 204ns

 <3> 吞吐率 = 100 / 203 ≈ 0.5, 加速比 = （2 + 2 + 1）* 100 / 203 ≈ 2.46

